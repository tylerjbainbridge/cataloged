# Migration `20200302170415-item-connected-to-collection`

This migration has been generated by Tyler Bainbridge at 3/2/2020, 5:04:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_CollectionToItem" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

ALTER TABLE "public"."Collection" DROP COLUMN "item";

CREATE UNIQUE INDEX "_CollectionToItem_AB_unique" ON "public"."_CollectionToItem"("A","B")

ALTER TABLE "public"."_CollectionToItem" ADD FOREIGN KEY ("A") REFERENCES "public"."Collection"("id") ON DELETE CASCADE

ALTER TABLE "public"."_CollectionToItem" ADD FOREIGN KEY ("B") REFERENCES "public"."Item"("id") ON DELETE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200302164235-optional-description..20200302170415-item-connected-to-collection
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model InviteCode {
   id String @id @default(cuid())
@@ -139,8 +139,9 @@
   name        String
   description String?
   entries CollectionEntry[]
+  items   Item[]
   user User?
 }
```


