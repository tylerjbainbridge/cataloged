# Migration `20200509155042-google-drive`

This migration has been generated by Tyler Bainbridge at 5/9/2020, 3:50:42 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."File" ADD COLUMN "externalId" text   ,
ADD COLUMN "googleAccountId" text   ,
ADD COLUMN "metadata" jsonb  NOT NULL ;

ALTER TABLE "public"."File" ADD FOREIGN KEY ("googleAccountId")REFERENCES "public"."GoogleAccount"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200509154954-init..20200509155042-google-drive
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model InviteCode {
   id        String   @default(cuid()) @id
@@ -21,53 +21,54 @@
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
-// googleAccountId     String?
-// googleAccount       GoogleAccount? @relation(fields: [googleAccountId], references: [id])
-// metadata            Json
 model File {
-  id                  String       @default(cuid()) @id
-  createdAt           DateTime     @default(now())
-  updatedAt           DateTime     @updatedAt
-  extension           String       @default("")
+  id                  String         @default(cuid()) @id
+  createdAt           DateTime       @default(now())
+  updatedAt           DateTime       @updatedAt
+  extension           String         @default("")
   hasStartedUploading Boolean?
   height              Int?
   isFailed            Boolean?
   isUploaded          Boolean?
   item                Item?
-  name                String       @default("")
+  name                String         @default("")
   size                Int?
   contentType         String?
-  title               String       @default("")
-  description         String       @default("")
+  title               String         @default("")
+  description         String         @default("")
   uploadGroupId       String?
-  uploadGroup         UploadGroup? @relation(fields: [uploadGroupId], references: [id])
+  uploadGroup         UploadGroup?   @relation(fields: [uploadGroupId], references: [id])
   userId              String?
-  user                User?        @relation(fields: [userId], references: [id])
+  user                User?          @relation(fields: [userId], references: [id])
   width               Int?
+  externalId          String?
+  googleAccountId     String?
+  googleAccount       GoogleAccount? @relation(fields: [googleAccountId], references: [id])
+  metadata            Json
   @@index([name, title, description, extension, isUploaded, isFailed])
 }
-// googleDriveFiles File[]
 model GoogleAccount {
-  id             String          @default(cuid()) @id
-  createdAt      DateTime        @default(now())
-  updatedAt      DateTime        @updatedAt
-  accountId      String?         @unique
-  email          String?
-  firstName      String?
-  lastName       String?
-  picture        String?
-  refreshToken   String?
-  accessToken    String?
-  expiresAt      DateTime
-  isAuthMethod   Boolean?
-  metadata       String?
-  userId         String?
-  user           User?           @relation(fields: [userId], references: [id])
-  googleContacts GoogleContact[]
+  id               String          @default(cuid()) @id
+  createdAt        DateTime        @default(now())
+  updatedAt        DateTime        @updatedAt
+  accountId        String?         @unique
+  email            String?
+  firstName        String?
+  lastName         String?
+  picture          String?
+  refreshToken     String?
+  accessToken      String?
+  expiresAt        DateTime
+  isAuthMethod     Boolean?
+  metadata         String?
+  userId           String?
+  user             User?           @relation(fields: [userId], references: [id])
+  googleContacts   GoogleContact[]
+  googleDriveFiles File[]
 }
 model GoogleContact {
   id                String         @default(cuid()) @id
```


