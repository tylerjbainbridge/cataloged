# Migration `20200126155251-landing-page-tools`

This migration has been generated by Tyler Bainbridge at 1/26/2020, 3:52:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."InviteCode" (
  "code" text  NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text  NOT NULL  ,
  "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Email" (
  "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "email" text  NOT NULL DEFAULT '' ,
  "id" text  NOT NULL  ,
  "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."User" ADD COLUMN "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
ADD COLUMN "inviteCode" text    REFERENCES "public"."InviteCode"("id") ON DELETE SET NULL,
ADD COLUMN "isActive" boolean  NOT NULL DEFAULT false ,
ADD COLUMN "role" text  NOT NULL DEFAULT '' ,
ADD COLUMN "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200120181155-default-status..20200126155251-landing-page-tools
--- datamodel.dml
+++ datamodel.dml
@@ -3,107 +3,139 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
+model InviteCode {
+  id String @id @default(cuid())
+
+  code String
+
+  users User[]
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Email {
+  id String @id @default(cuid())
+
+  email String
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
 model File {
-  createdAt           DateTime
-  extension           String      @default("")
+  extension           String   @default("")
   hasStartedUploading Boolean?
   height              Int?
-  id                  String      @id
+  id                  String   @id @default(cuid())
   isFailed            Boolean?
   isUploaded          Boolean?
   item                Item
-  name                String      @default("")
+  name                String   @default("")
   size                String?
-  updatedAt           DateTime
-  uploadGroup         UploadGroup
-  user                User
-  width               Int?
+
+  uploadGroup UploadGroup
+  user        User
+  width       Int?
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model GoogleAccount {
-  accountId    String?  @unique
-  createdAt    DateTime
+  accountId    String? @unique
   email        String?
   firstName    String?
-  id           String   @id
+  id           String  @id @default(cuid())
   lastName     String?
   picture      String?
   refreshToken String?
-  updatedAt    DateTime
   user         User
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model Item {
-  createdAt   DateTime
-  id          String   @id
+  id          String   @id @default(cuid())
   isFavorited Boolean  @default(false)
   status      String?  @default("NOT_STARTED")
   link        Link?
   note        Note?
   type        String   @default("")
-  updatedAt   DateTime
   user        User?
   file        File?
   labels      Label[]
+  createdAt   DateTime @default(now())
+  updatedAt   DateTime @updatedAt
 }
 model Label {
-  createdAt DateTime
-  id        String   @id
+  id        String   @id @default(cuid())
   name      String   @default("")
-  updatedAt DateTime
   user      User
   items     Item[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model Link {
-  createdAt   DateTime
   description String?
   favicon     String?
-  href        String   @default("")
-  id          String   @id
+  href        String  @default("")
+  id          String  @id @default(cuid())
   image       String?
-  notes       String   @default("")
+  notes       String  @default("")
   title       String?
-  updatedAt   DateTime
   user        User
   item        Item?
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model Note {
-  createdAt DateTime
-  id        String   @id
+  id        String   @id @default(cuid())
   raw       String   @default("")
   text      String   @default("")
-  updatedAt DateTime
   user      User
   item      Item?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model UploadGroup {
-  createdAt  DateTime
-  id         String   @id
+  id         String   @id @default(cuid())
   isComplete Boolean?
   isFailed   Boolean?
-  updatedAt  DateTime
   user       User
   files      File[]
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
 }
 model User {
   email          String          @default("") @unique
   firstName      String?
-  id             String          @id
+  id             String          @id @default(cuid())
   lastName       String?
   files          File[]
   googleAccounts GoogleAccount[]
   items          Item[]
   labels         Label[]
   links          Link[]
   notes          Note[]
   uploadGroups   UploadGroup[]
+
+  role     String  @default("")
+  isActive Boolean @default(false)
+
+  inviteCode InviteCode?
+
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
```


