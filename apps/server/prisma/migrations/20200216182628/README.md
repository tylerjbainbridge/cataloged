# Migration `20200216182628`

This migration has been generated by Tyler Bainbridge at 2/16/2020, 6:26:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."GoogleContact" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "emailAddresses" text []  ,
    "googleAccount" text  NOT NULL ,
    "id" text  NOT NULL ,
    "names" text []  ,
    "occupations" text []  ,
    "organizations" text []  ,
    "photos" text []  ,
    "resourceName" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."GoogleAccount" ADD COLUMN "metadata" text   ;

ALTER TABLE "public"."Item" ADD COLUMN "date" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
ADD COLUMN "googleContact" text   ;

CREATE UNIQUE INDEX "GoogleContact.resourceName" ON "public"."GoogleContact"("resourceName")

ALTER TABLE "public"."GoogleContact" ADD FOREIGN KEY ("googleAccount") REFERENCES "public"."GoogleAccount"("id") ON DELETE RESTRICT

ALTER TABLE "public"."GoogleContact" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Item" ADD FOREIGN KEY ("googleContact") REFERENCES "public"."GoogleContact"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200215153453-change-expire-field-name..20200216182628
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model InviteCode {
   id String @id @default(cuid())
@@ -67,11 +67,30 @@
   expiresAt DateTime
   isAuthMethod Boolean?
-  user User
+  metadata String?
+
+  user           User
+  googleContacts GoogleContact[]
 }
+model GoogleContact {
+  id        String   @id @default(cuid())
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  resourceName   String   @unique
+  names          String[]
+  emailAddresses String[]
+  occupations    String[]
+  organizations  String[]
+  photos         String[]
+
+  user          User
+  googleAccount GoogleAccount
+}
+
 model SavedSearch {
   id        String   @id @default(cuid())
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
@@ -107,12 +126,17 @@
   isFavorited Boolean @default(false)
   status      String? @default("NOT_STARTED")
   type        String  @default("")
-  link   Link?
-  note   Note?
-  user   User?
-  file   File?
+  date DateTime @default(now())
+
+  link Link?
+  note Note?
+  user User?
+  file File?
+
+  googleContact GoogleContact?
+
   labels Label[]
 }
 model Label {
```


