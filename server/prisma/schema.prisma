generator prisma {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRESQL_URL")
}

model InviteCode {
  id String @id @default(cuid())

  code String

  users User[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model InterestedUser {
  id String @id @default(cuid())

  email String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model File {
  extension           String   @default("")
  hasStartedUploading Boolean?
  height              Int?
  id                  String   @id @default(cuid())
  isFailed            Boolean?
  isUploaded          Boolean?
  item                Item
  name                String   @default("")
  size                String?

  title       String @default("")
  description String @default("")

  uploadGroup UploadGroup
  user        User
  width       Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model GoogleAccount {
  accountId    String? @unique
  email        String?
  firstName    String?
  id           String  @id @default(cuid())
  lastName     String?
  picture      String?
  refreshToken String?
  user         User

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SavedSearch {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name    String
  version Int

  user User?

  filters SavedSearchFilter[]
}

model SavedSearchFilter {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name     String
  operator String?
  value    String?
  values   String?

  user User?

  savedSearch SavedSearch?
}

model Item {
  id          String   @id @default(cuid())
  isFavorited Boolean  @default(false)
  status      String?  @default("NOT_STARTED")
  link        Link?
  note        Note?
  type        String   @default("")
  user        User?
  file        File?
  labels      Label[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Label {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name  String @default("")
  user  User
  items Item[]
}

model Link {
  description String?
  favicon     String?
  href        String  @default("")
  id          String  @id @default(cuid())
  image       String?
  notes       String  @default("")
  title       String?
  user        User
  item        Item?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Note {
  id        String   @id @default(cuid())
  raw       String   @default("")
  text      String   @default("")
  user      User
  item      Item?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UploadGroup {
  id         String   @id @default(cuid())
  isComplete Boolean?
  isFailed   Boolean?
  user       User
  files      File[]
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model User {
  email          String          @default("") @unique
  firstName      String?
  id             String          @id @default(cuid())
  lastName       String?
  files          File[]
  googleAccounts GoogleAccount[]
  items          Item[]
  labels         Label[]
  links          Link[]
  notes          Note[]
  uploadGroups   UploadGroup[]

  role     String  @default("")
  isActive Boolean @default(false)

  inviteCode InviteCode?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}