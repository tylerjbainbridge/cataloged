# Migration `20200116221848-init`

This migration has been generated by Tyler Bainbridge at 1/16/2020, 10:18:48 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."File" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "extension" text  NOT NULL DEFAULT '',
    "hasStartedUploading" boolean   ,
    "height" integer   ,
    "id" text  NOT NULL ,
    "isFailed" boolean   ,
    "isUploaded" boolean   ,
    "item" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "size" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "uploadGroup" text  NOT NULL ,
    "user" text  NOT NULL ,
    "width" integer   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."GoogleAccount" (
    "accountId" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "email" text   ,
    "firstName" text   ,
    "id" text  NOT NULL ,
    "lastName" text   ,
    "picture" text   ,
    "refreshToken" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Item" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "isFavorited" boolean  NOT NULL DEFAULT false,
    "link" text   ,
    "note" text   ,
    "type" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Label" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Link" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "description" text   ,
    "favicon" text   ,
    "href" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "image" text   ,
    "notes" text  NOT NULL DEFAULT '',
    "title" text   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Note" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "raw" text  NOT NULL DEFAULT '',
    "text" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."UploadGroup" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "isComplete" boolean   ,
    "isFailed" boolean   ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."User" (
    "email" text  NOT NULL DEFAULT '',
    "firstName" text   ,
    "id" text  NOT NULL ,
    "lastName" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."_ItemToLabel" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

CREATE UNIQUE INDEX "File_item" ON "public"."File"("item")

CREATE UNIQUE INDEX "GoogleAccount.accountId" ON "public"."GoogleAccount"("accountId")

CREATE UNIQUE INDEX "Item_link" ON "public"."Item"("link")

CREATE UNIQUE INDEX "Item_note" ON "public"."Item"("note")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "_ItemToLabel_AB_unique" ON "public"."_ItemToLabel"("A","B")

ALTER TABLE "public"."File" ADD FOREIGN KEY ("item") REFERENCES "public"."Item"("id") ON DELETE RESTRICT

ALTER TABLE "public"."File" ADD FOREIGN KEY ("uploadGroup") REFERENCES "public"."UploadGroup"("id") ON DELETE RESTRICT

ALTER TABLE "public"."File" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."GoogleAccount" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Item" ADD FOREIGN KEY ("link") REFERENCES "public"."Link"("id") ON DELETE SET NULL

ALTER TABLE "public"."Item" ADD FOREIGN KEY ("note") REFERENCES "public"."Note"("id") ON DELETE SET NULL

ALTER TABLE "public"."Item" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE SET NULL

ALTER TABLE "public"."Label" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Link" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Note" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."UploadGroup" ADD FOREIGN KEY ("user") REFERENCES "public"."User"("id") ON DELETE RESTRICT

ALTER TABLE "public"."_ItemToLabel" ADD FOREIGN KEY ("A") REFERENCES "public"."Item"("id") ON DELETE CASCADE

ALTER TABLE "public"."_ItemToLabel" ADD FOREIGN KEY ("B") REFERENCES "public"."Label"("id") ON DELETE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200116221848-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,108 @@
+generator photon {
+  provider = "photonjs"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("POSTGRESQL_URL")
+}
+
+model File {
+  createdAt           DateTime
+  extension           String      @default("")
+  hasStartedUploading Boolean?
+  height              Int?
+  id                  String      @id
+  isFailed            Boolean?
+  isUploaded          Boolean?
+  item                Item
+  name                String      @default("")
+  size                String?
+  updatedAt           DateTime
+  uploadGroup         UploadGroup
+  user                User
+  width               Int?
+}
+
+model GoogleAccount {
+  accountId    String?  @unique
+  createdAt    DateTime
+  email        String?
+  firstName    String?
+  id           String   @id
+  lastName     String?
+  picture      String?
+  refreshToken String?
+  updatedAt    DateTime
+  user         User
+}
+
+model Item {
+  createdAt   DateTime
+  id          String   @id
+  isFavorited Boolean  @default(false)
+  link        Link?
+  note        Note?
+  type        String   @default("")
+  updatedAt   DateTime
+  user        User?
+  file        File?
+  labels      Label[]
+}
+
+model Label {
+  createdAt DateTime
+  id        String   @id
+  name      String   @default("")
+  updatedAt DateTime
+  user      User
+  items     Item[]
+}
+
+model Link {
+  createdAt   DateTime
+  description String?
+  favicon     String?
+  href        String   @default("")
+  id          String   @id
+  image       String?
+  notes       String   @default("")
+  title       String?
+  updatedAt   DateTime
+  user        User
+  item        Item?
+}
+
+model Note {
+  createdAt DateTime
+  id        String   @id
+  raw       String   @default("")
+  text      String   @default("")
+  updatedAt DateTime
+  user      User
+  item      Item?
+}
+
+model UploadGroup {
+  createdAt  DateTime
+  id         String   @id
+  isComplete Boolean?
+  isFailed   Boolean?
+  updatedAt  DateTime
+  user       User
+  files      File[]
+}
+
+model User {
+  email          String          @default("") @unique
+  firstName      String?
+  id             String          @id
+  lastName       String?
+  files          File[]
+  googleAccounts GoogleAccount[]
+  items          Item[]
+  labels         Label[]
+  links          Link[]
+  notes          Note[]
+  uploadGroups   UploadGroup[]
+}
```


